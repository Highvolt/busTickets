package pt.fe.up.cmov.validator;

import java.io.IOException;

import android.app.IntentService;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothServerSocket;
import android.bluetooth.BluetoothSocket;
import android.content.Intent;
import android.util.Log;

public class ServerService extends IntentService {
	
	public static BluetoothServerSocket socket=null;
	public static Boolean running=true;
	public ServerService(){
		super("ServerBlue");
	}
	
	@Override
	protected void onHandleIntent(Intent intent) {
		// TODO Auto-generated method stub
		while(running){
			try {
				BluetoothSocket dev=socket.accept();
				Log.d("Server Service","Connected client");
				ClientHandler cConn=new ClientHandler(dev);
				cConn.start();
			} catch (IOException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
		}

	}
	
	@Override
	public void onCreate() {
		super.onCreate();
		
	}
	
	@Override
	public void onDestroy() {
		// TODO Auto-generated method stub
		super.onDestroy();
		socket.close();
	}
}
